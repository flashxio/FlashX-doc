<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="The Quick Start Guide for FlashX">
<meta name="keywords" content="getting_started,  Quick Start">
<title>The Quick Start Guide of FlashX | Documentation of FlashX</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4005feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Documentation of FlashX</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="https://github.com/zheng-da/FlashX" target="_blank">Source code</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:zhengda1936@gmail.com?subject=Documentation of FlashX f eedback&body=I have some feedback about the The Quick Start Guide of FlashX page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="The Quick Start Guide of FlashX">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Documentation of FlashX 6.0</li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li class="active"><a href="FlashX-Quick-Start-Guide.html">Get started</a></li>
            
            
            
            
            
            
            <li><a href="mydoc_about.html">About the theme author</a></li>
            
            
            
            
            
            
            <li><a href="mydoc_support.html">Support</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">User Guide</a>
        <ul>
            
            
            
            <li><a href="FlashGraph-user-guide.html">FlashGraph</a></li>
            
            
            
            
            
            
            <li><a href="FlashMatrix-user-guide.html">FlashMatrix</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Tutorials</a>
        <ul>
            
            
            
            <li><a href="FlashMatrix-programming-tutorial.html">FlashMatrix</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Contributing</a>
        <ul>
            
            
            
            <li><a href="mydoc_pages.html">Pages</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">API</a>
        <ul>
            
            
            
            <li><a href="http://flashx.io/docs/html/" target="_blank">C++</a></li>
            
            
            
            
            
            
            <li><a href="http://flashx.io/docs/FlashR/" target="_blank">R</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Troubleshooting</a>
        <ul>
            
            
            
            <li><a href="mydoc_troubleshooting.html">Troubleshooting</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">The Quick Start Guide of FlashX</h1>
</div>



<div class="post-content">

   
    <div class="summary">The Quick Start Guide for FlashX</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

    

    

    <a target="_blank" href="https://github.com/tomjohnson1492/documentation-theme-jekyll/blob/gh-pages/pages//_pages/mydoc/FlashX-Quick-Start-Guide.html.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

    

  <p>Although FlashX is designed to run on top of a high-speed SSD array, it can also run on magnetic disks and completely in memory. Intuitively, FlashX runs slower on magnetic disks than on SSDs. The guide below walks you through the steps to run FlashX on a magnetic disk and completely in memory for small graphs. In the following steps, we denote the top FlashX directory as <code class="highlighter-rouge">FG_TOP</code> and we assume we are in the top directory throughout this guide. The steps have been tested in Ubuntu 12.04 and Ubuntu 14.04.</p>

<h1 id="install-flashx">Install FlashX</h1>

<h2 id="step-0-library-dependency">Step 0: Library dependency</h2>
<p>FlashX requires the following libraries: <code class="highlighter-rouge">libpthread, libaio, libnuma, librt, boost, libhwloc, BLAS, zlib</code>.
Users need to install these libraries before compiling the code of FlashX.
In Ubuntu, we install all tools and libraries for compiling FlashX as follows:
<code class="highlighter-rouge">
sudo apt-get install -y git cmake g++
sudo apt-get install -y libboost-dev libboost-system-dev libboost-filesystem-dev libnuma-dev libaio-dev libhwloc-dev libatlas-base-dev zlib1g-dev
</code></p>

<h2 id="step-1-get-flashxs-source-code">Step 1: Get FlashX’s source code</h2>
<p>Users can download FlashX’s source code from <a href="https://github.com/icoming/FlashX/releases">here</a> or clone it from the <a href="https://github.com/icoming/FlashX.git">github</a> repository.</p>

<h2 id="step-2-compile-flashx">Step 2: Compile FlashX</h2>
<p>In the top directory of FlashX, run <code class="highlighter-rouge">mkdir build; cd build; cmake ../; make</code> to create a new directory, enter the new directory and compile all code of FlashX. If you have multiple processing cores you may prefer to run <code class="highlighter-rouge">make -j #procs</code></p>

<p>By default, FlashEigen is disabled because it requires users to install Trilinos in advance. FlashEigen was designed to compute eigenvalues of a graph with hundreds of millions of vertices or even billions of vertices. For smaller graphs, we can use <a href="https://github.com/icoming/FlashX/wiki/Use-FlashR-with-ARPACK">FlashR with ARPACK</a> to compute eigenvalues of graphs of multiple million vertices. As such, users who don’t need to compute eigenvalues of very large graphs can just to Step 3.</p>

<h3 id="step-21-install-trilinos-optional">Step 2.1 Install Trilinos (optional)</h3>
<p>To compile FlashX with FlashEigen, users need to install the Anasazi eigensolver in Trilinos first.
The Trilinos packages require a Fortran compiler and a BLAS and LAPACK package.</p>

<p><code class="highlighter-rouge">sudo apt-get install gfortran libatlas-dev liblapack-dev</code></p>

<p>Follow the <a href="https://trilinos.org/oldsite/TrilinosBuildQuickRef.html#configuring-makefile-generator">instructions</a> in Trilinos’ website to compile it. Here summaries the steps:</p>

<p>Inside the top directory of the Trilinos source code, create the following script named <code class="highlighter-rouge">do-configure</code>:
<code class="highlighter-rouge">
<span class="c">#!/bin/sh</span>
<span class="nv">EXTRA_ARGS</span><span class="o">=</span><span class="nv">$@</span>
<span class="nv">SOURCE_BASE</span><span class="o">=</span>..
cmake <span class="se">\</span>
    -D CMAKE_BUILD_TYPE:STRING<span class="o">=</span>RELEASE <span class="se">\</span>
    -D BUILD_SHARED_LIBS:BOOL<span class="o">=</span>ON <span class="se">\</span>
    -D <span class="nv">Trilinos_ENABLE_TESTS</span><span class="o">=</span>OFF <span class="se">\</span>
    <span class="nv">$EXTRA_ARGS</span> <span class="se">\</span>
    <span class="k">${</span><span class="nv">SOURCE_BASE</span><span class="k">}</span>
</code></p>

<p>Make the script executable.
<code class="highlighter-rouge">chmod u+x do-configure</code></p>

<p>Create a directory named <code class="highlighter-rouge">build</code> in the top directory and compile the Trilinos source code in the build directory.
<code class="highlighter-rouge">
mkdir build
cd build/
../do-configure -DTrilinos_ENABLE_Anasazi=ON
make -j32
make install
</code></p>

<h3 id="step-22-compile-flashx-with-flasheigen-optional">Step 2.2: compile FlashX with FlashEigen (optional)</h3>
<p>In the top directory of FlashX, run <code class="highlighter-rouge">mkdir build; cd build; cmake -D ENABLE_TRILINOS:BOOL=ON ..; make</code></p>

<h2 id="step-3-compile-and-install-flashr">Step 3: compile and install FlashR</h2>

<p>If users don’t have R installed, they can follow the <a href="https://cran.r-project.org/bin/linux/ubuntu/README">instruction</a> to install R in Ubuntu.</p>

<p><code class="highlighter-rouge">sudo apt-get install r-base-dev</code></p>

<p>FlashR requires igraph and Rcpp packages. Before installing FlashR, a user needs to install igraph, which installs the Rcpp package automatically. Users should install the latest R in order to install igraph. In the R environment, run</p>

<p><code class="highlighter-rouge">&gt; install.packages("igraph")</code></p>

<p>In the top directory of FlashX, run <code class="highlighter-rouge">./install_FlashR.sh</code> to install FlashR. The script tests if FlashEigen is compiled in Step 2. If FlashEigen is compiled, the script will compile FlashR with FlashEigen automatically.</p>

<h1 id="install-flashx-in-docker">Install FlashX in docker</h1>
<p>We prepare a docker file for users to install FlashX in docker easily, by simply following the two steps below. The following docker file builds all components in FlashX but doesn’t build FlashX with Trilinos.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>git clone https://github.com/zheng-da/FlashxStuff.git
docker build -t flashx FlashxStuff/
</code></pre>
</div>
<p>For default, the docker file compiles FlashX source code with 4 processes. If users’ platforms have many more CPU cores, they can utilize more CPU cores to accelerate the complication of FlashX. For example, if a user’s platform has 32 CPU cores, he can modify line 40 in <code class="highlighter-rouge">FlashxStuff/Dockerfile</code> to <code class="highlighter-rouge">RUN make -j32</code> before building the docker image.</p>

<p>To run the docker image, users can simply run <code class="highlighter-rouge">docker run -t -i flashx /bin/bash</code>.</p>

<h1 id="run-flashgraph">Run FlashGraph</h1>
<p>FlashGraph can run both in memory and on SSDs.</p>

<h2 id="convert-a-graph-in-edge-list-format-to-the-flashgraph-format">Convert a graph in edge list format to the FlashGraph format</h2>

<p>To run FlashGraph, users need to construct a graph in the FlashGraph format. We demonstrate the process with graphs from Stanford’s <a href="http://snap.stanford.edu/data/">SNAP</a> project. We currently require the input graph to be in <strong>edge list text format</strong>.</p>

<p>Go to the top directory of FlashX and download a graph from the SNAP website.</p>

<p><code class="highlighter-rouge"> wget http://snap.stanford.edu/data/wiki-Vote.txt.gz</code></p>

<p>FlashX provides a tool <code class="highlighter-rouge">el2fg</code> to convert an edge list file in text format to the graph format supported by FlashGraph.
<code class="highlighter-rouge">
gunzip wiki-Vote.txt.gz
build/matrix/utils/el2fg flash-graph/conf/run_test.txt wiki-Vote.txt wiki-Vote
</code></p>

<p>This tool takes a configuration file, a graph file in text edge list and a user-specified graph name. The command above creates two files <code class="highlighter-rouge">wiki-Vote.adj</code> and <code class="highlighter-rouge">wiki-Vote.index</code>.
For the purpose of demonstration, FlashGraph provides <code class="highlighter-rouge">flash-graph/conf/run_test.txt</code>. The details on the configuration file can be found <a href="https://github.com/icoming/FlashGraph/wiki/FlashGraph-tutorial#flashgraph-configuration-parameters">here</a>.</p>

<p>The FlashGraph format allows one attribute for an edge. To construct a graph with edge attributes, users need to provide option <code class="highlighter-rouge">-t</code> to indicate the attribute type (“I” for 32-bytes integers, “L” for 64-bits integers, “F” for single-precision floating point, “D” for double-precision floating point). The command below shows an example of converting a graph with integer edge attributes.
<code class="highlighter-rouge">
build/matrix/utils/el2fg flash-graph/conf/run_test.txt graph_edgelist.txt graph_name -t I
</code></p>

<h2 id="run-flashgraph-in-the-standalone-mode">Run FlashGraph in the standalone mode</h2>
<p>Although FlashGraph is designed to work with SAFS, it can also run in the standalone mode. In this mode, FlashGraph loads graphs in memory and perform computation on the in-memory graphs. This is the simplest setup for FlashGraph. This mode detects the number of CPU cores and runs in parallel automatically.</p>

<p>FlashGraph provides a few built-in graph algorithm implementations. Users can run these implementations in flash-graph/test-algs/test_algs. test_algs takes three arguments: a FlashGraph config file, a graph file of the FlashGraph format and an index file for the graph file from the local Linux filesystem.
For example, the command below runs WCC (weakly connected components) on the wiki graph.
<code class="highlighter-rouge">
build/flash-graph/test-algs/test_algs flash-graph/conf/run_test.txt wiki-Vote.adj wiki-Vote.index wcc
...
There are 1183 empty vertices
There are 24 components (exclude empty vertices), and largest comp has 7066 vertices
</code></p>

<h2 id="run-flashgraph-with-safs">Run FlashGraph with SAFS.</h2>
<p>FlashGraph is designed to run with SAFS, so that it can run on top of an SSD array. When running FlashGraph with SAFS, we get the full power of FlashGraph. It requires us to configure SAFS properly.</p>

<h3 id="step-1-configure-safs">Step 1: Configure SAFS</h3>
<p>It is fairly simple to configure SAFS for a small SSD array in an SMP machine. Users only need to mount the SSDs, create data directories on SSDs and inform SAFS of the paths to the data directories. It becomes more complex to configure SAFS for a large SSD array in a NUMA machine, where we need to take processor affinity into account to maximize the performance of the SSD array. SAFS also provides a script to automate the process. To achieve the maximal performance from an SSD array, we refer users to <a href="https://github.com/zheng-da/FlashX/wiki/SAFS-user-manual#configurations">SAFS configurations</a> for more details.</p>

<p>To run SAFS, users need to provide a data config file that indicates the paths of the data directories of SAFS. Users need to set up the SAFS parameter <code class="highlighter-rouge">root_conf</code> to specify the data config file. For example, if a user has two SSDs, mounted in <code class="highlighter-rouge">/mnt/ssd1</code> and <code class="highlighter-rouge">/mnt/ssd2</code>, respectively. The data config file contains two lines:
<code class="highlighter-rouge">
0:/mnt/ssd1
0:/mnt/ssd2
</code>
The number before “:” indicates the NUMA node Id where the SSD is attached to. For an SMP machine, the node Id is always 0.</p>

<p>To run FlashGraph with SAFS, we need to specify <code class="highlighter-rouge">root_conf</code> in the FlashGraph config file.
For the purpose of demonstration, FlashGraph provides <code class="highlighter-rouge">run_test.txt</code> (FlashGraph config file) and <code class="highlighter-rouge">data_files.txt</code> (data config file) in <code class="highlighter-rouge">flash-graph/conf/</code>. <code class="highlighter-rouge">data_files.txt</code> specifies the directory where SAFS runs. Replace <code class="highlighter-rouge">FG_TOP</code> in the two config files with the location of the top directory of FlashGraph.</p>

<p>Users have to make sure the directories in the data config file have been created. For example, if users use the example data config file <code class="highlighter-rouge">flash-graph/conf/data_files.txt</code>, they have to create <code class="highlighter-rouge">flash-graph/data</code> first.
<code class="highlighter-rouge">
mkdir flash-graph/data
</code></p>

<p><strong>NOTE: users should never manually create files or directories in the data directories where SAFS runs.</strong> Instead, users should always use <code class="highlighter-rouge">SAFS-util</code> to operate on SAFS.</p>

<h3 id="step-2-load-graph-files-to-safs">Step 2: Load graph files to SAFS</h3>
<p>We need to load a graph to SAFS before we run FlashGraph.</p>

<p>If a user has a graph in the FlashGraph format, we load a file from a Linux filesystem to SAFS with <code class="highlighter-rouge">SAFS-util</code>. The following commands load the wiki-Vote graph to SAFS. When loading graph files to SAFS, the recommended naming convention is that for a graph named <code class="highlighter-rouge">graph_name</code>, the graph file should be named with <code class="highlighter-rouge">graph_name.adj</code> and the index file should be named with <code class="highlighter-rouge">graph_name.index</code>. This naming convention is important when users run FlashGraph in R.
<code class="highlighter-rouge">
build/utils/SAFS-util flash-graph/conf/run_test.txt load wiki-Vote.adj wiki-Vote.adj
build/utils/SAFS-util flash-graph/conf/run_test.txt load wiki-Vote.index wiki-Vote.index
</code></p>

<p>If a user has a graph in the text format, we can construct a graph and store it on SAFS directly with <code class="highlighter-rouge">el2al</code>.
<code class="highlighter-rouge">
build/matrix/utils/el2fg -e flash-graph/conf/run_test.txt wiki-Vote.txt wiki-Vote
</code></p>

<h3 id="step-3-run-graph-algorithms">Step 3: Run graph algorithms</h3>
<p>The command below demonstrates how to run PageRank on wiki-Vote.
<code class="highlighter-rouge">
build/flash-graph/test-algs/test_algs flash-graph/conf/run_test.txt wiki-Vote.adj wiki-Vote.index pagerank2
...
The sum of pagerank of all vertices: 3146.831787
v5254: 6.384571
v7553: 6.444084
v4191: 6.734981
v2237: 7.413904
v2470: 7.496633
v2398: 7.745999
v2625: 9.750073
v6634: 10.646951
v15: 10.923159
v4037: 13.684291
</code></p>

<h1 id="run-flashr">Run FlashR</h1>
<p>FlashR contains functions that call graph algorithms in FlashGraph, the eigensolvers in FlashEigen and matrix operations in FlashMatrix.</p>

<h2 id="configure-flashr">Configure FlashR</h2>
<p>FlashR uses the same configuration file as FlashGraph. Both FlashGraph and FlashMatrix provides a default configuration file: <code class="highlighter-rouge">flash-graph/conf/run_test.txt</code> and <code class="highlighter-rouge">matrix/conf/run_test.txt</code>.</p>

<p>The important parameters that users need to configure for a specific machine are:
* <code class="highlighter-rouge">num_nodes</code>: the number of NUMA nodes that FlashR can run on.
* <code class="highlighter-rouge">threads</code>: the number of threads that FlashR uses.
* <code class="highlighter-rouge">root_conf</code>: the data config file as explained above.
In addition, users also need to specify the following parameters for FlashGraph.
* <code class="highlighter-rouge">cache_size</code>: the page cache size in SAFS.
* <code class="highlighter-rouge">num_io_threads</code>: the number of I/O threads per NUMA node.</p>

<p>Users can use the following function to configure FlashR.
<code class="highlighter-rouge">R
&gt; fg.set.conf("flash-graph/conf/run_test.txt")
</code></p>

<h2 id="run-flashgraph-in-flashr">Run FlashGraph in FlashR</h2>
<p>Users can run graph algorithms provided by FlashGraph in FlashR.</p>

<p>Users can load a graph in both text edge list format and the FlashGraph format. If users provide a the text edge list format, FlashR will construct the FlashGraph format directly. e.g., both of the following commands loads the wiki-Vote graph to FlashR (assume the text edge list and the FlashGraph image are both in the current directory).
<code class="highlighter-rouge">R
g &lt;- fg.load.graph("./wiki-Vote.txt", directed=TRUE)
g &lt;- fg.load.graph("./wiki-Vote.adj", "./wiki-Vote.index")
</code></p>

<p>Here shows an example of running PageRank.
<code class="highlighter-rouge">R
&gt; library(FlashR)
&gt; fg.set.conf("flash-graph/conf/run_test.txt")
&gt; g &lt;- fg.load.graph("./wiki-Vote.adj", "./wiki-Vote.index")
&gt; res &lt;- fg.page.rank(g)
&gt; res &lt;- sort(res, decreasing=FALSE, index.return=TRUE)
&gt; tail(res$x, n=10)
 [1]  6.354546  6.411633  6.703026  7.396998  7.483035  7.702387  9.680690
 [8] 10.584648 10.879063 13.640081
&gt; tail(res$ix, n=10)-1
 [1] 5254 7553 4191 2237 2470 2398 2625 6634   15 4037
</code></p>

<h2 id="compute-eigenvalues-in-flashr">Compute eigenvalues in FlashR</h2>
<p>There are two ways of computing eigenvalues on a large sparse graph. Users can compute eigenvalues with FlashEigen in FlashR if FlashEigen is installed. Otherwise, users can compute eigenvalues with ARPACK and FlashR for relatively smaller graphs (millions of vertices).</p>

<h3 id="construct-a-sparse-matrix">Construct a sparse matrix</h3>
<p>FlashX provides a tool called <code class="highlighter-rouge">fg2fm</code> to construct a sparse matrix image from a FlashGraph image. Currently, this is the only way of constructing a sparse matrix for FlashR.
<code class="highlighter-rouge">
build/matrix/utils/fg2fm matrix/conf/run_test.txt ./wiki-Vote.adj ./wiki-Vote.index wiki
</code>
The wiki graph is directed, so <code class="highlighter-rouge">fg2fm</code> outputs four files.
<code class="highlighter-rouge">
$ ls wiki*
wiki.mat  wiki.mat_idx  wiki_t.mat  wiki_t.mat_idx
</code></p>

<h3 id="load-a-sparse-matrix-in-flashr">Load a sparse matrix in FlashR</h3>
<p>There are multiple ways of loading a sparse matrix in FlashR.
* Users can load a graph image in FlashGraph format and get a sparse matrix.
<code class="highlighter-rouge">R
&gt; g &lt;- fg.load.graph("./wiki-Vote.adj", "./wiki-Vote.index")
&gt; m &lt;- fm.get.matrix(g)
</code>
* Users can load a sparse matrix image directly.
<code class="highlighter-rouge">R
&gt; m &lt;- fm.load.matrix("./wiki.mat", "./wiki.mat_idx", "./wiki_t.mat", "./wiki_t.mat_idx")
</code></p>

<h3 id="run-flasheigen">Run FlashEigen</h3>
<p><code class="highlighter-rouge">fm.eigen</code> is the R wrapper of FlashEigen. It is designed to have a very similar interface to ARPACK in iGraph. Below shows an example of using <code class="highlighter-rouge">fm.eigen</code> to compute SVD on the asymmetric matrix. Currently, FlashEigen only supports computing eigenvalues on symmetric matrices.
<code class="highlighter-rouge">R
&gt; library(FlashR)
&gt; fg.set.conf("matrix/conf/run_test.txt")
&gt; m &lt;- fm.load.matrix("wiki.mat", "wiki.mat_idx", "wiki_t.mat", "wiki_t.mat_idx")
&gt; multiply &lt;- function(x, extra) t(m) %*% (m %*% x)
&gt; res &lt;- fm.eigen(multiply, options=list(n=dim(m)[1], nev=10))
&gt; res$vals
 [1] 10647.6830  4489.1724  2999.1288  2272.7854  1608.5572  1285.5764
 [7]  1149.1096   921.1726   826.9480   758.7215
</code></p>

<h3 id="run-flashr--arpack">Run FlashR + ARPACK</h3>
<p>To compute eigenvalues with ARPACK and FlashR,
<code class="highlighter-rouge">R
&gt; library(FlashR)
&gt; fg.set.conf("matrix/conf/run_test.txt")
&gt; m &lt;- fm.load.matrix("wiki.mat", "wiki.mat_idx", "wiki_t.mat", "wiki_t.mat_idx")
&gt; multiply &lt;- function(x, extra) as.vector(t(m) %*% (m %*% fm.as.vector(x)))
&gt; res &lt;- arpack(multiply, sym=TRUE, options=list(n=nrow(m), nev=10, ncv=20))
&gt; res$values
 [1] 10647.6830  4489.1724  2999.1288  2272.7854  1608.5572  1285.5764
 [7]  1149.1096   921.1726   826.9480   758.7215
</code></p>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_getting_started.html" class="btn btn-default navbar-btn cursorNorm" role="button">getting_started</a>
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 FlashX. All rights reserved. <br />
<span>Page last updated:</span> Nov 3, 2016<br/> Site last generated: Nov 3, 2016 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>